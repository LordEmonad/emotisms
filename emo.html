<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <title>$EMO — Emonad Memecoin</title>

  <!-- OG / Social Meta -->
  <meta property="og:title" content="$EMO — Emonad Memecoin">
  <meta property="og:description" content="i lost it all on day 1">
  <meta property="og:image" content="https://escapist.lol/og-image.jpg">
  <meta property="og:url" content="https://escapist.lol/emo.html">
  <meta property="og:type" content="website">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@EmonadCoin">
  <meta name="twitter:title" content="$EMO — Emonad Memecoin">
  <meta name="twitter:description" content="i lost it all on day 1">
  <meta name="twitter:image" content="https://escapist.lol/og-image.jpg">

  <meta name="description" content="$EMO — the emo kid of Monad. Buy, trade, and join the community.">
  <link rel="canonical" href="https://escapist.lol/emo.html">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="preload" as="image" href="emonad.webp" type="image/webp">
  <link rel="preload" as="image" href="emonad.jpg" type="image/jpeg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-color: #ffffff;
      --text-color: #1a1a1a;
      --text-secondary: #666666;
      --text-muted: #aaaaaa;
      --accent: #7B3FE4;
      --accent-hover: #6930c3;
      --accent-glow: rgba(123, 63, 228, 0.25);
      --surface: #f5f3ff;
      --surface-border: #e4d8f8;
      --ticker-bg: rgba(255, 255, 255, 0.92);
      --ticker-border: #e9e0f5;
    }

    [data-theme="dark"] {
      --bg-color: #0a0a0a;
      --text-color: #ffffff;
      --text-secondary: #888888;
      --text-muted: #505050;
      --accent: #9B5FFF;
      --accent-hover: #b080ff;
      --accent-glow: rgba(155, 95, 255, 0.3);
      --surface: rgba(255, 255, 255, 0.06);
      --surface-border: rgba(255, 255, 255, 0.1);
      --ticker-bg: rgba(15, 15, 15, 0.92);
      --ticker-border: rgba(255, 255, 255, 0.08);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: radial-gradient(ellipse at 50% 0%, var(--accent-glow) 0%, transparent 55%), var(--bg-color);
      color: var(--text-color);
      font-family: 'Space Grotesk', sans-serif;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
      line-height: 1.6;
      overflow-x: hidden;
    }

    /* ── Theme Transition ── */
    html.theme-transition,
    html.theme-transition *,
    html.theme-transition *::before,
    html.theme-transition *::after {
      transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease !important;
    }

    /* ── Entrance Animations ── */
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(24px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .animate-in {
      opacity: 0;
      animation: fadeInUp 0.7s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }

    /* ── Price Ticker ── */
    .price-ticker {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: var(--ticker-bg);
      border-bottom: 1px solid var(--ticker-border);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      padding: 0 24px;
      height: 44px;
      display: flex;
      align-items: center;
      gap: 16px;
      font-size: 13px;
      font-weight: 600;
      z-index: 100;
      overflow-x: auto;
      scrollbar-width: none;
    }

    .price-ticker::-webkit-scrollbar { display: none; }

    .ticker-item {
      display: flex;
      align-items: center;
      gap: 5px;
      white-space: nowrap;
      flex-shrink: 0;
    }

    .ticker-label {
      color: var(--text-secondary);
      font-weight: 500;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .ticker-value {
      color: var(--text-color);
      font-weight: 700;
    }

    .ticker-brand {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-shrink: 0;
    }

    .ticker-logo {
      width: 24px;
      height: 24px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 50%;
      padding: 3px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.15), 0 2px 8px rgba(0, 0, 0, 0.15);
      flex-shrink: 0;
    }

    .ticker-logo svg {
      width: 100%;
      height: 100%;
      animation: logoSpin 12s linear infinite;
    }

    @keyframes logoSpin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .ticker-name {
      color: var(--accent);
      font-weight: 800;
      font-size: 14px;
      letter-spacing: 0.5px;
    }

    .ticker-divider {
      width: 1px;
      height: 18px;
      background: var(--surface-border);
      flex-shrink: 0;
    }

    .change-badge {
      padding: 2px 8px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 700;
    }

    .change-badge.positive {
      background: rgba(34, 197, 94, 0.12);
      color: #22c55e;
    }

    .change-badge.negative {
      background: rgba(239, 68, 68, 0.12);
      color: #ef4444;
    }

    .ticker-spacer { flex: 1; }

    /* Ticker Skeleton */
    .ticker-skeleton {
      display: inline-block;
      width: 52px;
      height: 14px;
      background: var(--surface);
      border-radius: 4px;
      position: relative;
      overflow: hidden;
      vertical-align: middle;
    }

    .ticker-skeleton::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, var(--accent-glow), transparent);
      animation: shimmer 1.5s infinite;
    }

    @keyframes shimmer {
      to { left: 100%; }
    }

    .ticker-skeleton.wide { width: 70px; }
    .ticker-skeleton.badge {
      width: 48px;
      height: 20px;
      border-radius: 20px;
    }

    /* Ticker Refresh Flash */
    @keyframes tickerFlash {
      0% { color: var(--accent); }
      100% { color: var(--text-color); }
    }

    .ticker-flash {
      animation: tickerFlash 0.6s ease;
    }

    /* ── Theme Toggle ── */
    .theme-toggle {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: 1px solid var(--surface-border);
      background: var(--surface);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 15px;
      transition: all 0.25s ease;
      flex-shrink: 0;
      position: relative;
    }

    .theme-toggle:hover {
      border-color: var(--accent);
      background: var(--accent-glow);
    }

    .theme-toggle:focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }

    .theme-toggle .icon-sun,
    .theme-toggle .icon-moon {
      position: absolute;
      transition: all 0.3s ease;
    }

    .theme-toggle .icon-sun { opacity: 0; transform: rotate(-90deg); }
    .theme-toggle .icon-moon { opacity: 1; transform: rotate(0deg); }
    [data-theme="dark"] .theme-toggle .icon-sun { opacity: 1; transform: rotate(0deg); }
    [data-theme="dark"] .theme-toggle .icon-moon { opacity: 0; transform: rotate(90deg); }

    /* ── Main Layout ── */
    .container {
      max-width: 600px;
      margin: 0 auto;
      padding: 76px 20px 50px;
      text-align: center;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .header-image {
      width: 70%;
      max-width: 360px;
      margin: 0 auto 28px;
      display: block;
      border-radius: 16px;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
      transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1), box-shadow 0.4s ease;
    }

    .header-image:hover {
      transform: translateY(-6px) scale(1.02);
      box-shadow: 0 20px 50px rgba(155, 95, 255, 0.3), 0 8px 20px rgba(0, 0, 0, 0.15);
    }

    .header-image.parallax {
      will-change: transform;
    }

    .title {
      font-size: 2.4rem;
      font-weight: 800;
      margin: 0 0 6px;
      letter-spacing: -0.5px;
      background: linear-gradient(135deg, var(--accent), var(--text-color) 70%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitle {
      font-size: 1.1rem;
      color: var(--text-secondary);
      font-weight: 500;
      margin-bottom: 36px;
      min-height: 1.6em;
    }

    /* Typewriter Cursor */
    .typewriter-cursor {
      display: inline-block;
      width: 2px;
      height: 1.1em;
      background: var(--accent);
      margin-left: 2px;
      vertical-align: text-bottom;
      animation: blinkCursor 0.6s step-end infinite;
    }

    @keyframes blinkCursor {
      0%, 100% { opacity: 1; }
      50% { opacity: 0; }
    }

    /* ── Primary Actions ── */
    .primary-actions {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin-bottom: 32px;
      width: 100%;
      max-width: 520px;
    }

    .btn-primary {
      background: var(--accent);
      color: #ffffff;
      border: none;
      padding: 14px 36px;
      border-radius: 999px;
      font-family: 'Space Grotesk', sans-serif;
      font-weight: 700;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.25s ease;
      text-decoration: none;
      text-align: center;
      white-space: nowrap;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      flex: 1;
      max-width: 220px;
    }

    .btn-primary:hover {
      background: var(--accent-hover);
      transform: translateY(-2px);
      box-shadow: 0 8px 28px var(--accent-glow);
    }

    .btn-primary:active { transform: translateY(0); }

    .btn-primary:focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }

    .btn-primary-outline {
      background: transparent;
      border: 2px solid var(--accent);
      color: var(--accent);
    }

    .btn-primary-outline:hover {
      background: var(--accent);
      color: #ffffff;
      box-shadow: 0 8px 28px var(--accent-glow);
    }

    /* ── Button Sections ── */
    .button-section {
      width: 100%;
      max-width: 520px;
      margin-bottom: 24px;
    }

    .section-label {
      font-size: 10px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      color: var(--text-muted);
      margin-bottom: 10px;
    }

    .button-grid {
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
    }

    /* ── Buttons ── */
    .btn {
      background: var(--accent);
      color: #ffffff;
      border: none;
      padding: 11px 22px;
      border-radius: 999px;
      font-family: 'Space Grotesk', sans-serif;
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.25s ease;
      text-decoration: none;
      text-align: center;
      white-space: nowrap;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .btn:hover {
      background: var(--accent-hover);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px var(--accent-glow);
    }

    .btn:active { transform: translateY(0); }

    .btn:focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }

    .btn.btn-outline {
      background: transparent;
      border: 1.5px solid var(--surface-border);
      color: var(--text-color);
    }

    .btn.btn-outline:hover {
      border-color: var(--accent);
      color: var(--accent);
      background: var(--accent-glow);
      box-shadow: none;
    }

    /* ── Contract Address ── */
    .contract-section {
      margin-top: 4px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .contract-address {
      background: var(--surface);
      color: var(--text-secondary);
      padding: 10px 18px;
      border-radius: 999px;
      text-align: center;
      cursor: pointer;
      border: 1px solid var(--surface-border);
      font-size: 12px;
      font-weight: 500;
      font-family: 'Space Grotesk', monospace;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      letter-spacing: -0.2px;
      position: relative;
      transition: all 0.25s ease;
      max-width: 95%;
    }

    .contract-address:hover {
      border-color: var(--accent);
      color: var(--accent);
    }

    .contract-address:focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }

    .copy-icon {
      flex-shrink: 0;
      opacity: 0.4;
      transition: opacity 0.2s;
    }

    .contract-address:hover .copy-icon { opacity: 1; }

    .contract-address.copied {
      border-color: #22c55e;
      color: #22c55e;
    }

    .contract-address.copied .copy-icon { opacity: 1; }

    .contract-full { display: inline; }
    .contract-short { display: none; }

    /* ── Toast Notification ── */
    .toast {
      position: fixed;
      bottom: 32px;
      left: 50%;
      transform: translateX(-50%) translateY(20px);
      background: var(--accent);
      color: white;
      padding: 10px 22px;
      border-radius: 999px;
      font-size: 13px;
      font-weight: 600;
      font-family: 'Space Grotesk', sans-serif;
      box-shadow: 0 8px 30px var(--accent-glow);
      z-index: 2000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.25s ease, transform 0.25s ease;
    }

    .toast.visible {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    /* ── Price Alert Glow ── */
    @keyframes alertGlow {
      0%, 100% { box-shadow: none; }
      50% { box-shadow: 0 0 12px 2px currentColor; }
    }

    .change-badge.alert {
      animation: alertGlow 1.5s ease 3;
    }

    /* ── Button Icons ── */
    .btn-icon {
      width: 16px;
      height: 16px;
      flex-shrink: 0;
    }

    /* ── Button Ripple ── */
    .btn, .btn-primary, .share-btn, .contract-address {
      position: relative;
      overflow: hidden;
    }

    .ripple {
      position: absolute;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      transform: scale(0);
      animation: rippleOut 0.5s ease-out;
      pointer-events: none;
    }

    @keyframes rippleOut {
      to { transform: scale(4); opacity: 0; }
    }

    /* ── Updated Ago ── */
    .ticker-updated {
      font-size: 10px;
      color: var(--text-muted);
      font-weight: 500;
      white-space: nowrap;
      flex-shrink: 0;
    }

    .monad-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      color: var(--text-secondary);
      font-weight: 600;
      margin-top: 16px;
      padding: 7px 14px 7px 10px;
      border-radius: 999px;
      background: var(--surface);
      border: 1px solid var(--surface-border);
      letter-spacing: 0.2px;
      transition: border-color 0.25s ease;
    }

    .monad-badge:hover {
      border-color: #836EF9;
    }

    .monad-badge .monad-logo {
      width: 18px;
      height: 18px;
      flex-shrink: 0;
    }

    .monad-badge .live-indicator {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .monad-badge .dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: #22c55e;
      box-shadow: 0 0 6px rgba(34, 197, 94, 0.5);
      animation: pulseDot 2s ease infinite;
    }

    @keyframes pulseDot {
      0%, 100% { opacity: 1; box-shadow: 0 0 6px rgba(34, 197, 94, 0.5); }
      50% { opacity: 0.4; box-shadow: 0 0 2px rgba(34, 197, 94, 0.2); }
    }

    /* ── Share Button ── */
    .share-btn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 12px;
      color: var(--text-secondary);
      font-weight: 600;
      margin-top: 10px;
      padding: 7px 16px;
      border-radius: 999px;
      background: var(--surface);
      border: 1px solid var(--surface-border);
      cursor: pointer;
      font-family: 'Space Grotesk', sans-serif;
      transition: all 0.25s ease;
      position: relative;
    }

    .share-btn:hover {
      border-color: var(--accent);
      color: var(--accent);
    }

    .share-btn:focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }


    /* ── Chart Modal ── */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .modal-overlay.active { display: flex; }

    .modal-content {
      width: 95%;
      max-width: 1200px;
      height: 80vh;
      background: #111;
      border-radius: 20px;
      overflow: hidden;
      position: relative;
      box-shadow: 0 25px 80px rgba(0, 0, 0, 0.6);
      border: 1px solid rgba(255, 255, 255, 0.08);
      animation: modalIn 0.35s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .modal-compact {
      max-width: 420px;
      width: 420px;
      height: 520px;
      border-radius: 24px;
    }

    @keyframes modalIn {
      from { opacity: 0; transform: scale(0.96) translateY(12px); }
      to { opacity: 1; transform: scale(1) translateY(0); }
    }

    .modal-content iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    .modal-close {
      position: absolute;
      top: 14px;
      right: 14px;
      color: white;
      font-size: 28px;
      cursor: pointer;
      z-index: 1001;
      transition: all 0.2s;
      background: rgba(255, 255, 255, 0.1);
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1;
      border: 1px solid rgba(255, 255, 255, 0.15);
    }

    .modal-close:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: scale(1.1);
    }

    .modal-close:focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }

    /* Modal Spinner */
    .modal-spinner {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 36px;
      height: 36px;
      border: 3px solid rgba(255, 255, 255, 0.08);
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      z-index: 0;
    }

    @keyframes spin {
      to { transform: translate(-50%, -50%) rotate(360deg); }
    }

    /* ── Footer ── */
    .footer {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 24px 0 0;
      font-size: 12px;
      color: var(--text-muted);
      font-weight: 500;
    }

    .footer a {
      color: var(--text-muted);
      text-decoration: none;
      transition: color 0.2s;
    }

    .footer a:hover { color: var(--accent); }

    .footer-dot {
      opacity: 0.4;
    }

    /* ── Scroll Hint ── */
    .scroll-hint {
      display: none;
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      color: var(--text-muted);
      opacity: 0;
      z-index: 50;
      transition: opacity 0.4s ease;
      animation: bounceHint 2s ease infinite;
    }

    @keyframes bounceHint {
      0%, 100% { transform: translateX(-50%) translateY(0); }
      50% { transform: translateX(-50%) translateY(-6px); }
    }

    /* ── Mouse Glow ── */
    .mouse-glow {
      position: fixed;
      top: 0;
      left: 0;
      width: 500px;
      height: 500px;
      pointer-events: none;
      z-index: 9998;
      background: radial-gradient(circle, rgba(155, 95, 255, 0.1) 0%, rgba(155, 95, 255, 0.03) 35%, transparent 70%);
      transform: translate(-50%, -50%);
      transition: opacity 0.3s ease;
      opacity: 0;
      will-change: left, top;
      mix-blend-mode: screen;
    }

    /* ── Mobile Background Glow ── */
    @keyframes mobileGlow {
      0% { transform: scale(1); opacity: 0.5; }
      100% { transform: scale(1.3); opacity: 1; }
    }

    /* ── Page Transition ── */
    .page-transition {
      position: fixed;
      inset: 0;
      z-index: 9999;
      pointer-events: none;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .page-transition .pt-overlay {
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at 50% 50%, rgba(155, 95, 255, 0.15) 0%, transparent 60%),
        var(--bg-color);
      transform: scaleY(0);
      transform-origin: bottom;
    }

    .page-transition .pt-logo {
      position: relative;
      z-index: 1;
      opacity: 0;
      transform: scale(0.5) rotate(-30deg);
    }

    .page-transition .pt-logo svg {
      width: 80px;
      height: 80px;
      filter: drop-shadow(0 0 30px rgba(155, 95, 255, 0.6));
    }

    .page-transition .pt-glow {
      position: absolute;
      inset: -20px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(155, 95, 255, 0.3) 0%, transparent 70%);
      opacity: 0;
    }

    /* ── Exit (leaving page) ── */
    .page-transition.exit-active {
      pointer-events: all;
    }

    .page-transition.exit-active .pt-overlay {
      animation: ptOverlayIn 1.1s cubic-bezier(0.77, 0, 0.175, 1) forwards;
    }

    .page-transition.exit-active .pt-logo {
      animation: ptLogoIn 1.0s 0.45s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }

    .page-transition.exit-active .pt-glow {
      animation: ptGlowPulse 1.1s 0.55s ease forwards;
    }

    @keyframes ptOverlayIn {
      0% { transform: scaleY(0); transform-origin: bottom; }
      100% { transform: scaleY(1); transform-origin: bottom; }
    }

    @keyframes ptLogoIn {
      0% { opacity: 0; transform: scale(0.5) rotate(-30deg); }
      60% { opacity: 1; transform: scale(1.08) rotate(5deg); }
      100% { opacity: 1; transform: scale(1) rotate(0deg); }
    }

    @keyframes ptGlowPulse {
      0% { opacity: 0; transform: scale(0.5); }
      50% { opacity: 1; transform: scale(1.2); }
      100% { opacity: 0.6; transform: scale(1); }
    }

    .page-transition.exit-active ~ .container,
    .page-transition.exit-active ~ .price-ticker {
      animation: ptContentOut 0.95s cubic-bezier(0.77, 0, 0.175, 1) forwards;
    }

    @keyframes ptContentOut {
      0% { opacity: 1; transform: translateY(0) scale(1); filter: blur(0); }
      100% { opacity: 0; transform: translateY(-40px) scale(0.97); filter: blur(4px); }
    }

    /* ── Entrance (arriving on page) ── */
    .page-transition.enter .pt-overlay {
      transform: scaleY(1);
      transform-origin: top;
      animation: ptOverlayReveal 1.1s 0.25s cubic-bezier(0.77, 0, 0.175, 1) forwards;
    }

    .page-transition.enter .pt-logo {
      opacity: 1;
      transform: scale(1) rotate(0deg);
      animation: ptLogoReveal 0.8s cubic-bezier(0.77, 0, 0.175, 1) forwards;
    }

    .page-transition.enter .pt-glow {
      opacity: 0.6;
      animation: ptGlowOut 0.7s ease forwards;
    }

    @keyframes ptOverlayReveal {
      0% { transform: scaleY(1); }
      100% { transform: scaleY(0); }
    }

    @keyframes ptLogoReveal {
      0% { opacity: 1; transform: scale(1) rotate(0deg); }
      100% { opacity: 0; transform: scale(1.3) rotate(15deg); }
    }

    @keyframes ptGlowOut {
      0% { opacity: 0.6; transform: scale(1); }
      100% { opacity: 0; transform: scale(2); }
    }

    .page-enter {
      animation: ptPageEnter 1.1s 0.3s cubic-bezier(0.16, 1, 0.3, 1) both;
    }

    @keyframes ptPageEnter {
      0% { opacity: 0; transform: translateY(25px); filter: blur(3px); }
      100% { opacity: 1; transform: translateY(0); filter: blur(0); }
    }

    /* ── Reduced Motion ── */
    @media (prefers-reduced-motion: reduce) {
      .animate-in { animation: none !important; opacity: 1; }
      .mouse-glow { display: none; }
      #particleGrid { display: none; }
      .btn:hover,
      .btn-primary:hover,
      .header-image:hover { transform: none; }
      .modal-content { animation: none; }
      .monad-badge .dot { animation: none; }
      .ticker-skeleton::after { animation: none; }
      .ticker-logo svg { animation: none; }
      .typewriter-cursor { animation: none; opacity: 1; }
      .scroll-hint { animation: none; }
      .modal-spinner { animation: none; }
      .ticker-flash { animation: none; }
      body::after { animation: none !important; }
      .change-badge.alert { animation: none; }
      .ripple { animation: none; display: none; }
      .page-transition { display: none; }
      .page-enter { animation: none; opacity: 1; }
    }

    /* ── Responsive ── */
    @media (max-width: 768px) {
      .price-ticker {
        height: 38px;
        padding: 0 12px;
        gap: 10px;
        font-size: 11px;
      }

      .ticker-label { display: none; }
      .ticker-item.hide-mobile { display: none; }
      .ticker-brand { gap: 6px; }
      .ticker-logo { width: 20px; height: 20px; padding: 2px; }
      .ticker-name { font-size: 12px; }
      .ticker-value { font-size: 12px; }
      .change-badge { font-size: 10px; padding: 2px 6px; }
      .theme-toggle { width: 30px; height: 30px; font-size: 14px; }

      .container {
        padding: 60px 16px 30px;
        justify-content: flex-start;
      }

      .header-image {
        width: 55%;
        max-width: 200px;
        margin-bottom: 18px;
      }

      .title { font-size: 1.8rem; }
      .subtitle { font-size: 0.95rem; margin-bottom: 28px; }

      .primary-actions { gap: 10px; margin-bottom: 26px; }
      .btn-primary { padding: 12px 28px; font-size: 15px; }

      .button-section { margin-bottom: 18px; }
      .section-label { font-size: 9px; margin-bottom: 8px; }
      .button-grid { gap: 8px; }

      .btn {
        padding: 9px 16px;
        font-size: 12px;
      }

      .contract-address {
        font-size: 12px;
        padding: 9px 14px;
        max-width: 100%;
      }

      .contract-full { display: none; }
      .contract-short { display: inline; }

      .modal-content {
        width: 100%;
        height: 70vh;
        border-radius: 14px;
      }

      .modal-compact {
        width: 100%;
        max-width: 100%;
        height: 70vh;
        border-radius: 14px;
      }

      /* Mobile background glow */
      body::after {
        content: '';
        position: fixed;
        inset: 0;
        z-index: -1;
        pointer-events: none;
        background:
          radial-gradient(circle at 30% 20%, var(--accent-glow) 0%, transparent 50%),
          radial-gradient(circle at 70% 80%, rgba(155, 95, 255, 0.1) 0%, transparent 50%);
        animation: mobileGlow 8s ease-in-out infinite alternate;
      }
    }

    @media (max-width: 380px) {
      .price-ticker {
        height: 34px;
        gap: 6px;
        padding: 0 8px;
      }

      .ticker-logo { width: 18px; height: 18px; padding: 2px; }
      .ticker-name { font-size: 11px; }
      .ticker-value { font-size: 11px; }
      .change-badge { font-size: 9px; padding: 1px 5px; }

      .title { font-size: 1.5rem; }
      .subtitle { font-size: 0.85rem; }

      .primary-actions { flex-direction: column; align-items: center; }
      .btn-primary { max-width: 100%; width: 100%; padding: 13px 20px; }

      .btn {
        padding: 7px 12px;
        font-size: 11px;
      }

      .contract-address {
        font-size: 9px;
        padding: 7px 10px;
      }

      .header-image {
        width: 50%;
        max-width: 160px;
      }
    }
  </style>
</head>
<body>

  <!-- Price Ticker -->
  <div class="price-ticker" id="priceTicker" role="banner" aria-label="Live token price data">
    <div class="ticker-brand">
      <div class="ticker-logo" aria-hidden="true">
        <svg viewBox="0 0 24 24"><path fill="#836EF9" d="M12 3c-2.599 0-9 6.4-9 9s6.401 9 9 9s9-6.401 9-9s-6.401-9-9-9m-1.402 14.146c-1.097-.298-4.043-5.453-3.744-6.549s5.453-4.042 6.549-3.743c1.095.298 4.042 5.453 3.743 6.549c-.298 1.095-5.453 4.042-6.549 3.743"/></svg>
      </div>
      <span class="ticker-name">$EMO</span>
    </div>
    <div class="ticker-divider"></div>
    <div class="ticker-item">
      <span class="ticker-value" id="tokenPrice"><span class="ticker-skeleton wide"></span></span>
    </div>
    <div class="ticker-item">
      <span class="change-badge" id="priceChange"><span class="ticker-skeleton badge"></span></span>
    </div>
    <div class="ticker-item">
      <span class="ticker-label">MC</span>
      <span class="ticker-value" id="marketCap"><span class="ticker-skeleton"></span></span>
    </div>
    <div class="ticker-item hide-mobile">
      <span class="ticker-label">Vol</span>
      <span class="ticker-value" id="tickerVolume"><span class="ticker-skeleton"></span></span>
    </div>
    <div class="ticker-item hide-mobile">
      <span class="ticker-label">Liq</span>
      <span class="ticker-value" id="tickerLiquidity"><span class="ticker-skeleton"></span></span>
    </div>
    <div class="ticker-item hide-mobile">
      <span class="ticker-label">FDV</span>
      <span class="ticker-value" id="tickerFdv"><span class="ticker-skeleton"></span></span>
    </div>
    <span class="ticker-spacer"></span>
    <span class="ticker-updated" id="tickerUpdated"></span>
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark and light theme">
      <span class="icon-sun">&#9680;</span>
      <span class="icon-moon">&#9681;</span>
    </button>
  </div>

  <div class="container">
    <picture>
      <source srcset="emonad.webp" type="image/webp">
      <img src="emonad.jpg" alt="Emonad mascot" class="header-image animate-in" style="animation-delay:0.05s">
    </picture>

    <h1 class="title animate-in" style="animation-delay:0.12s">$EMO</h1>
    <p class="subtitle" id="subtitle" style="opacity:0">i lost it all on day 1</p>

    <!-- Primary Actions -->
    <div class="primary-actions animate-in" style="animation-delay:0.26s">
      <button class="btn-primary" id="buyBtn">Buy $EMO</button>
      <button class="btn-primary btn-primary-outline" id="chartBtn">Chart</button>
    </div>

    <!-- Trade Section -->
    <div class="button-section animate-in" style="animation-delay:0.33s">
      <div class="section-label">Trade</div>
      <div class="button-grid">
        <a href="https://nad.fun/tokens/0x81A224F8A62f52BdE942dBF23A56df77A10b7777" class="btn btn-outline" target="_blank" rel="noopener noreferrer">Nad.fun</a>
        <a href="https://www.kuru.io/token/0x81a224f8a62f52bde942dbf23a56df77a10b7777" class="btn btn-outline" target="_blank" rel="noopener noreferrer">Kuru</a>
        <a href="https://dexscreener.com/monad/0x714a2694c8d4f0b1bfba0e5b76240e439df2182d" class="btn btn-outline" target="_blank" rel="noopener noreferrer">DEX</a>
        <a href="https://opensea.io/token/monad/0x81a224f8a62f52bde942dbf23a56df77a10b7777?timeframe=all_time&candleSize=one_day" class="btn btn-outline" target="_blank" rel="noopener noreferrer">OpenSea</a>
      </div>
    </div>

    <!-- Community Section -->
    <div class="button-section animate-in" style="animation-delay:0.38s">
      <div class="section-label">Community</div>
      <div class="button-grid">
        <a href="https://twitter.com/EmonadCoin" class="btn btn-outline" target="_blank" rel="noopener noreferrer"><svg class="btn-icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>Twitter</a>
        <a href="https://t.me/+8RP7jI5wA3o2N2Fh" class="btn btn-outline" target="_blank" rel="noopener noreferrer"><svg class="btn-icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.479.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/></svg>Telegram</a>
        <a href="https://www.tiktok.com/@emoworldorder" class="btn btn-outline" target="_blank" rel="noopener noreferrer"><svg class="btn-icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-2.88 2.5 2.89 2.89 0 0 1-2.89-2.89 2.89 2.89 0 0 1 2.89-2.89c.28 0 .54.04.79.1v-3.5a6.37 6.37 0 0 0-.79-.05A6.34 6.34 0 0 0 3.15 15a6.34 6.34 0 0 0 6.34 6.34 6.34 6.34 0 0 0 6.34-6.34V8.7a8.16 8.16 0 0 0 4.76 1.52v-3.4a4.85 4.85 0 0 1-1-.13z"/></svg>Brain Rot</a>
      </div>
    </div>

    <!-- Explore Section -->
    <div class="button-section animate-in" style="animation-delay:0.43s">
      <div class="section-label">Explore</div>
      <div class="button-grid">
        <a href="memes.html" class="btn btn-outline">Memes</a>
        <a href="https://giphy.com/emonad" target="_blank" rel="noopener noreferrer" class="btn btn-outline">GIFs</a>
        <a href="tools.html" class="btn btn-outline">Tools</a>
        <a href="https://lordemonad.github.io/emolt-agent/heartbeat.html" target="_blank" rel="noopener noreferrer" class="btn btn-outline">EMOLT Agent</a>
        <a href="flapemonad/index.html" target="_blank" rel="noopener noreferrer" class="btn btn-outline">Flap Emonad</a>
      </div>
    </div>

    <!-- Contract Address -->
    <div class="contract-section animate-in" style="animation-delay:0.48s">
      <div class="contract-address" id="contractAddress" role="button" tabindex="0" aria-label="Copy contract address to clipboard">
        <span id="contractText"><span class="contract-full">0x81A224F8A62f52BdE942dBF23A56df77A10b7777</span><span class="contract-short">0x81A2...7777</span></span>
        <svg class="copy-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
      </div>
      <div class="monad-badge" aria-label="Live on Monad network">
        <svg class="monad-logo" viewBox="0 0 24 24" aria-hidden="true"><path fill="#836EF9" d="M12 3c-2.599 0-9 6.4-9 9s6.401 9 9 9s9-6.401 9-9s-6.401-9-9-9m-1.402 14.146c-1.097-.298-4.043-5.453-3.744-6.549s5.453-4.042 6.549-3.743c1.095.298 4.042 5.453 3.743 6.549c-.298 1.095-5.453 4.042-6.549 3.743"/></svg>
        <span class="live-indicator">
          <span class="dot" aria-hidden="true"></span>
          Live on Monad
        </span>
      </div>
      <button class="share-btn" id="shareBtn" aria-label="Share this page">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" y1="2" x2="12" y2="15"/></svg>
        Share
      </button>
    </div>

    <!-- Footer -->
    <footer class="footer animate-in" style="animation-delay:0.53s">
      <a href="https://twitter.com/EmonadCoin" target="_blank" rel="noopener noreferrer">Twitter</a>
      <span class="footer-dot">·</span>
      <a href="https://t.me/+8RP7jI5wA3o2N2Fh" target="_blank" rel="noopener noreferrer">Telegram</a>
      <span class="footer-dot">·</span>
      <a href="https://www.tiktok.com/@emoworldorder" target="_blank" rel="noopener noreferrer">TikTok</a>
      <span class="footer-dot">·</span>
      <span>the emo kid of Monad</span>
    </footer>
  </div>

  <!-- Chart Modal -->
  <div class="modal-overlay" id="chartModal" role="dialog" aria-label="Price chart" aria-modal="true">
    <div class="modal-content">
      <div class="modal-spinner" id="chartSpinner"></div>
      <button class="modal-close" id="chartClose" aria-label="Close chart">&times;</button>
      <iframe id="chartFrame" src="" allowfullscreen sandbox="allow-scripts allow-same-origin allow-forms allow-popups" title="DEXScreener price chart"></iframe>
    </div>
  </div>

  <!-- Buy/Swap Modal -->
  <div class="modal-overlay" id="buyModal" role="dialog" aria-label="Buy EMO token" aria-modal="true">
    <div class="modal-content modal-compact">
      <div class="modal-spinner" id="buySpinner"></div>
      <button class="modal-close" id="buyClose" aria-label="Close swap widget">&times;</button>
      <iframe id="buyFrame" src="" allow="clipboard-write" sandbox="allow-scripts allow-same-origin allow-forms allow-popups" style="background: #131313; border-radius: 24px;" title="Uniswap swap widget"></iframe>
    </div>
  </div>

  <!-- Scroll Hint (mobile) -->
  <div class="scroll-hint" id="scrollHint" aria-hidden="true">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
  </div>

  <script>
    // ── Smart Price Formatting ──
    function formatPrice(price) {
      if (price >= 1) return '$' + price.toFixed(2);
      if (price >= 0.01) return '$' + price.toFixed(4);
      var str = price.toFixed(20);
      var match = str.match(/^0\.(0+)/);
      if (match) {
        var zeros = match[1].length;
        var rest = str.slice(2 + zeros, 2 + zeros + 4).replace(/0+$/, '') || '0';
        var sub = '\u2080\u2081\u2082\u2083\u2084\u2085\u2086\u2087\u2088\u2089';
        var subscript = String(zeros).split('').map(function(d) { return sub[parseInt(d)]; }).join('');
        return '$0.0' + subscript + rest;
      }
      return '$' + price.toFixed(7);
    }

    // ── Ticker Refresh Flash ──
    function flashTicker(id) {
      var el = document.getElementById(id);
      el.classList.remove('ticker-flash');
      void el.offsetWidth;
      el.classList.add('ticker-flash');
    }

    // ── Animated Counter ──
    function animateValue(el, newText, duration) {
      if (el.textContent === newText) return;
      el.style.transition = 'opacity 0.15s';
      el.style.opacity = '0.4';
      setTimeout(() => {
        el.textContent = newText;
        el.style.opacity = '1';
      }, 150);
    }

    // ── Price Ticker — unified fetch ──
    var isFirstFetch = true;
    var lastFetchTime = null;
    var tickerLoaded = false;

    function fmt(n) {
      if (n == null) return '--';
      return n >= 1000000 ? '$' + (n / 1000000).toFixed(2) + 'M' : '$' + (n / 1000).toFixed(1) + 'K';
    }

    function clearSkeletons() {
      document.querySelectorAll('.ticker-skeleton').forEach(s => {
        s.parentElement.textContent = '--';
      });
    }

    async function fetchPrice() {
      try {
        const response = await fetch('https://api.dexscreener.com/latest/dex/pairs/monad/0x714a2694c8d4f0b1bfba0e5b76240e439df2182d');
        const data = await response.json();
        if (data.pair) {
          const pair = data.pair;
          const price = parseFloat(pair.priceUsd);
          const change24h = parseFloat(pair.priceChange.h24);

          const priceEl = document.getElementById('tokenPrice');
          const newPrice = formatPrice(price);
          if (isFirstFetch) { priceEl.textContent = newPrice; }
          else { animateValue(priceEl, newPrice, 200); }

          const changeEl = document.getElementById('priceChange');
          changeEl.textContent = (change24h >= 0 ? '+' : '') + change24h.toFixed(2) + '%';
          const alertClass = Math.abs(change24h) >= 20 ? ' alert' : '';
          changeEl.className = 'change-badge ' + (change24h >= 0 ? 'positive' : 'negative') + alertClass;

          const mcEl = document.getElementById('marketCap');
          const mcText = pair.marketCap ? fmt(pair.marketCap) : '--';
          if (isFirstFetch) { mcEl.textContent = mcText; }
          else { animateValue(mcEl, mcText, 200); }

          document.getElementById('tickerVolume').textContent = pair.volume && pair.volume.h24 ? fmt(pair.volume.h24) : '--';
          document.getElementById('tickerLiquidity').textContent = pair.liquidity && pair.liquidity.usd ? fmt(pair.liquidity.usd) : '--';
          document.getElementById('tickerFdv').textContent = pair.fdv ? fmt(pair.fdv) : '--';

          if (!isFirstFetch) {
            flashTicker('tokenPrice');
            flashTicker('marketCap');
          }
          isFirstFetch = false;
          tickerLoaded = true;
          lastFetchTime = Date.now();
        }
      } catch (error) {
        console.log('Price fetch error:', error);
        if (!tickerLoaded) clearSkeletons();
      }
    }

    // Timeout fallback: if API hasn't responded after 8s, clear skeletons
    setTimeout(() => { if (!tickerLoaded) clearSkeletons(); }, 8000);

    fetchPrice();
    setInterval(fetchPrice, 30000);

    // ── "Updated ago" timer ──
    setInterval(() => {
      if (!lastFetchTime) return;
      const seconds = Math.floor((Date.now() - lastFetchTime) / 1000);
      const el = document.getElementById('tickerUpdated');
      if (seconds < 5) el.textContent = 'just now';
      else if (seconds < 60) el.textContent = seconds + 's ago';
      else el.textContent = Math.floor(seconds / 60) + 'm ago';
    }, 1000);

    // ── Toast Notification ──
    let toastTimer;
    function showToast(message) {
      let toast = document.querySelector('.toast');
      if (!toast) {
        toast = document.createElement('div');
        toast.className = 'toast';
        document.body.appendChild(toast);
      }
      clearTimeout(toastTimer);
      toast.textContent = message;
      toast.classList.add('visible');
      toastTimer = setTimeout(() => toast.classList.remove('visible'), 1800);
    }

    // ── Copy Contract (click + keyboard) ──
    const contractEl = document.getElementById('contractAddress');
    function copyContract() {
      navigator.clipboard.writeText('0x81A224F8A62f52BdE942dBF23A56df77A10b7777');
      contractEl.classList.add('copied');
      setTimeout(() => contractEl.classList.remove('copied'), 1800);
      showToast('Copied!');
      if (navigator.vibrate) navigator.vibrate(10);
    }
    contractEl.addEventListener('click', copyContract);
    contractEl.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); copyContract(); }
    });

    // ── Modals ──
    const chartModal = document.getElementById('chartModal');
    const chartFrame = document.getElementById('chartFrame');
    const chartClose = document.getElementById('chartClose');
    const chartSpinner = document.getElementById('chartSpinner');
    const buyModal = document.getElementById('buyModal');
    const buyFrame = document.getElementById('buyFrame');
    const buyClose = document.getElementById('buyClose');
    const buySpinner = document.getElementById('buySpinner');

    chartFrame.addEventListener('load', () => { chartSpinner.style.display = 'none'; });
    buyFrame.addEventListener('load', () => { buySpinner.style.display = 'none'; });

    // ── Modal Focus Trap + Escape ──
    let previousFocus = null;

    function trapFocus(modal, e) {
      if (e.key === 'Escape') {
        closeModal(modal === chartModal ? 'chart' : 'buy');
        return;
      }
      if (e.key !== 'Tab') return;
      const focusable = modal.querySelectorAll('button, [tabindex]:not([tabindex="-1"]), iframe');
      const first = focusable[0];
      const last = focusable[focusable.length - 1];
      if (e.shiftKey && document.activeElement === first) { e.preventDefault(); last.focus(); }
      else if (!e.shiftKey && document.activeElement === last) { e.preventDefault(); first.focus(); }
    }

    function openModal(type) {
      previousFocus = document.activeElement;
      const modal = type === 'chart' ? chartModal : buyModal;
      const frame = type === 'chart' ? chartFrame : buyFrame;
      const spinner = type === 'chart' ? chartSpinner : buySpinner;
      const close = type === 'chart' ? chartClose : buyClose;
      spinner.style.display = 'block';
      frame.src = type === 'chart'
        ? 'https://dexscreener.com/monad/0x714a2694c8d4f0b1bfba0e5b76240e439df2182d?embed=1&theme=dark&info=0'
        : 'https://app.uniswap.org/swap?chain=monad&outputCurrency=0x81A224F8A62f52BdE942dBF23A56df77A10b7777';
      modal.classList.add('active');
      close.focus();
      document.addEventListener('keydown', modal._trapHandler = (e) => trapFocus(modal, e));
    }

    function closeModal(type) {
      const modal = type === 'chart' ? chartModal : buyModal;
      const frame = type === 'chart' ? chartFrame : buyFrame;
      modal.classList.remove('active');
      frame.src = '';
      if (modal._trapHandler) document.removeEventListener('keydown', modal._trapHandler);
      if (previousFocus) previousFocus.focus();
    }

    document.getElementById('chartBtn').addEventListener('click', () => openModal('chart'));
    document.getElementById('buyBtn').addEventListener('click', () => openModal('buy'));

    chartClose.addEventListener('click', () => closeModal('chart'));
    chartModal.addEventListener('click', (e) => { if (e.target === chartModal) closeModal('chart'); });

    buyClose.addEventListener('click', () => closeModal('buy'));
    buyModal.addEventListener('click', (e) => { if (e.target === buyModal) closeModal('buy'); });

    // ── Theme Toggle (smooth transition) ──
    const themeToggle = document.getElementById('themeToggle');
    const html = document.documentElement;

    const savedTheme = localStorage.getItem('theme') ||
      (window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
    html.setAttribute('data-theme', savedTheme);

    themeToggle.addEventListener('click', () => {
      html.classList.add('theme-transition');
      const current = html.getAttribute('data-theme');
      const next = current === 'dark' ? 'light' : 'dark';
      html.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
      setTimeout(() => html.classList.remove('theme-transition'), 350);
    });

    // ── Typewriter Effect ──
    (function() {
      const el = document.getElementById('subtitle');
      const text = el.textContent;
      const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      if (prefersReducedMotion) {
        el.style.opacity = '1';
        return;
      }

      el.textContent = '';
      el.style.opacity = '1';

      const cursor = document.createElement('span');
      cursor.className = 'typewriter-cursor';
      el.appendChild(cursor);

      let i = 0;
      function type() {
        if (i < text.length) {
          el.insertBefore(document.createTextNode(text.charAt(i)), cursor);
          i++;
          setTimeout(type, 50 + Math.random() * 40);
        } else {
          setTimeout(() => {
            cursor.style.transition = 'opacity 0.4s';
            cursor.style.opacity = '0';
            setTimeout(() => cursor.remove(), 400);
          }, 1500);
        }
      }

      setTimeout(type, 700);
    })();

    // ── Share Button ──
    document.getElementById('shareBtn').addEventListener('click', async () => {
      const shareData = {
        title: '$EMO — Emonad Memecoin',
        text: 'i lost it all on day 1',
        url: window.location.href
      };

      try {
        if (navigator.share) {
          await navigator.share(shareData);
        } else {
          await navigator.clipboard.writeText(window.location.href);
          showToast('Link copied!');
          if (navigator.vibrate) navigator.vibrate(10);
        }
      } catch (e) {
        // User cancelled share
      }
    });

    // ── Button Ripple Effect ──
    (function() {
      if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;
      document.addEventListener('click', (e) => {
        const target = e.target.closest('.btn, .btn-primary, .share-btn, .contract-address');
        if (!target) return;
        const ripple = document.createElement('span');
        ripple.className = 'ripple';
        const rect = target.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height);
        ripple.style.width = ripple.style.height = size + 'px';
        ripple.style.left = (e.clientX - rect.left - size / 2) + 'px';
        ripple.style.top = (e.clientY - rect.top - size / 2) + 'px';
        target.appendChild(ripple);
        ripple.addEventListener('animationend', () => ripple.remove());
      });
    })();

    // ── Hero Image Parallax (desktop only) ──
    (function() {
      if (window.innerWidth < 768) return;
      if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;
      const img = document.querySelector('.header-image');
      if (!img) return;
      img.classList.add('parallax');
      window.addEventListener('scroll', () => {
        const offset = window.scrollY * 0.15;
        img.style.transform = `translateY(${Math.min(offset, 15)}px)`;
      }, { passive: true });
    })();

    // ── Scroll Hint (mobile) ──
    (function() {
      if (window.innerWidth > 768) return;
      const hint = document.getElementById('scrollHint');
      setTimeout(() => {
        if (document.body.scrollHeight > window.innerHeight + 50) {
          hint.style.display = 'block';
          setTimeout(() => { hint.style.opacity = '0.6'; }, 50);
        }
      }, 1200);

      var scrolled = false;
      window.addEventListener('scroll', () => {
        if (!scrolled && window.scrollY > 30) {
          scrolled = true;
          hint.style.opacity = '0';
          setTimeout(() => { hint.style.display = 'none'; }, 400);
        }
      }, { passive: true });
    })();
  </script>

  <!-- Particle Grid Background -->
  <canvas id="particleGrid" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none;" aria-hidden="true"></canvas>

  <script>
    (function() {
      if (window.innerWidth < 768) return;
      if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;

      const canvas = document.getElementById('particleGrid');
      const ctx = canvas.getContext('2d');

      let width, height;
      let particles = [];
      let mouseX = -1000, mouseY = -1000;
      const gridSpacing = 50;
      const particleRadius = 1.5;
      const pushRadius = 150;
      const pushStrength = 1.2;
      const returnSpeed = 0.05;
      const connectionDistance = 80;
      let animationId;
      let isVisible = true;

      function resize() {
        width = canvas.width = window.innerWidth;
        height = canvas.height = window.innerHeight;
        initParticles();
      }

      function initParticles() {
        particles = [];
        for (let x = gridSpacing / 2; x < width; x += gridSpacing) {
          for (let y = gridSpacing / 2; y < height; y += gridSpacing) {
            particles.push({ originX: x, originY: y, x: x, y: y, vx: 0, vy: 0 });
          }
        }
      }

      function animate() {
        if (!isVisible) return;
        ctx.clearRect(0, 0, width, height);

        const isLight = document.documentElement.getAttribute('data-theme') !== 'dark';
        const baseAlpha = isLight ? 0.25 : 0.15;
        const maxAlpha = isLight ? 0.65 : 0.5;
        const particleColor = isLight ? '123, 63, 228' : '155, 95, 255';

        particles.forEach(p => {
          const dx = mouseX - p.x;
          const dy = mouseY - p.y;
          const dist = Math.sqrt(dx * dx + dy * dy);

          if (dist < pushRadius && dist > 0) {
            const force = (pushRadius - dist) / pushRadius;
            p.vx -= (dx / dist) * force * pushStrength;
            p.vy -= (dy / dist) * force * pushStrength;
          }

          const homeX = p.originX - p.x;
          const homeY = p.originY - p.y;
          p.vx += homeX * returnSpeed;
          p.vy += homeY * returnSpeed;

          p.vx *= 0.9;
          p.vy *= 0.9;
          p.x += p.vx;
          p.y += p.vy;

          const displacement = Math.sqrt(homeX * homeX + homeY * homeY);
          const alpha = Math.min(baseAlpha + displacement * 0.02, maxAlpha);

          ctx.beginPath();
          ctx.arc(p.x, p.y, particleRadius, 0, Math.PI * 2);
          ctx.fillStyle = `rgba(${particleColor}, ${alpha})`;
          ctx.fill();
        });

        // Connection lines between displaced particles near mouse
        ctx.lineWidth = 0.5;
        for (let i = 0; i < particles.length; i++) {
          const a = particles[i];
          const dxA = mouseX - a.x;
          const dyA = mouseY - a.y;
          const distA = Math.sqrt(dxA * dxA + dyA * dyA);
          if (distA > pushRadius * 1.2) continue;
          for (let j = i + 1; j < particles.length; j++) {
            const b = particles[j];
            const dx2 = a.x - b.x;
            const dy2 = a.y - b.y;
            const dist2 = Math.sqrt(dx2 * dx2 + dy2 * dy2);
            if (dist2 < connectionDistance) {
              const lineAlpha = (1 - dist2 / connectionDistance) * 0.15;
              ctx.beginPath();
              ctx.moveTo(a.x, a.y);
              ctx.lineTo(b.x, b.y);
              ctx.strokeStyle = `rgba(${particleColor}, ${lineAlpha})`;
              ctx.stroke();
            }
          }
        }

        animationId = requestAnimationFrame(animate);
      }

      document.addEventListener('visibilitychange', () => {
        if (document.hidden) {
          isVisible = false;
          cancelAnimationFrame(animationId);
        } else {
          isVisible = true;
          animate();
        }
      });

      document.addEventListener('mousemove', (e) => { mouseX = e.clientX; mouseY = e.clientY; });
      document.addEventListener('mouseleave', () => { mouseX = -1000; mouseY = -1000; });

      let resizeTimeout;
      window.addEventListener('resize', () => {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(resize, 150);
      });

      resize();
      animate();
    })();
  </script>

  <!-- Page Transition Overlay -->
  <div class="page-transition" id="pageTransition" aria-hidden="true">
    <div class="pt-overlay"></div>
    <div class="pt-logo">
      <div class="pt-glow"></div>
      <svg viewBox="0 0 24 24"><path fill="#836EF9" d="M12 3c-2.599 0-9 6.4-9 9s6.401 9 9 9s9-6.401 9-9s-6.401-9-9-9m-1.402 14.146c-1.097-.298-4.043-5.453-3.744-6.549s5.453-4.042 6.549-3.743c1.095.298 4.042 5.453 3.743 6.549c-.298 1.095-5.453 4.042-6.549 3.743"/></svg>
    </div>
  </div>

  <script>
    // ── Page Transition for internal links ──
    (function() {
      const transition = document.getElementById('pageTransition');
      const internalLinks = ['memes.html', 'tools.html'];

      // Entrance: if arriving from internal page or back navigation, play reveal
      var fromInternal = sessionStorage.getItem('pt-entering');
      if (fromInternal) sessionStorage.removeItem('pt-entering');

      var isBack = false;
      if (performance.getEntriesByType && performance.getEntriesByType('navigation').length) {
        isBack = performance.getEntriesByType('navigation')[0].type === 'back_forward';
      }

      if (fromInternal || isBack) {
        transition.classList.add('enter');
        document.querySelector('.container').classList.add('page-enter');
        document.querySelector('.price-ticker').classList.add('page-enter');
        setTimeout(() => transition.remove(), 1600);
      }

      // Exit: intercept clicks to internal pages
      document.addEventListener('click', (e) => {
        const link = e.target.closest('a[href]');
        if (!link) return;
        const href = link.getAttribute('href');
        if (!internalLinks.some(p => href === p || href.endsWith('/' + p))) return;

        e.preventDefault();
        transition.classList.add('exit-active');
        sessionStorage.setItem('pt-entering', '1');

        setTimeout(() => {
          window.location.href = href;
        }, 1400);
      });
    })();
  </script>

  <!-- Mouse Glow Effect -->
  <script>
    (function() {
      if (window.innerWidth < 768) return;
      if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;

      const glow = document.createElement('div');
      glow.className = 'mouse-glow';
      glow.style.opacity = '1';
      glow.setAttribute('aria-hidden', 'true');
      document.body.appendChild(glow);

      document.addEventListener('mousemove', (e) => {
        glow.style.left = e.clientX + 'px';
        glow.style.top = e.clientY + 'px';
      }, true);

      document.documentElement.addEventListener('mouseleave', () => { glow.style.opacity = '0'; });
      document.documentElement.addEventListener('mouseenter', () => { glow.style.opacity = '1'; });
    })();
  </script>

</body>
</html>
